# =============================================================================
# SUPABASE SELF-HOSTED - MARKETPLACE INSTANCE
# =============================================================================
# Copy this file to .env and fill in all values
# Generate secrets with: openssl rand -base64 32

# =============================================================================
# DOMAIN & URLs
# =============================================================================
# Kong API Gateway domain (used by haex-marketplace backend)
DOMAIN=api.marketplace.haex.space

# Studio domain (separate subdomain for dashboard)
STUDIO_DOMAIN=studio.marketplace.haex.space

# Site URL (for auth redirects)
SITE_URL=https://marketplace.haex.space
API_EXTERNAL_URL=https://api.marketplace.haex.space

# =============================================================================
# POSTGRES DATABASE
# =============================================================================
POSTGRES_HOST=db
POSTGRES_PORT=5432
POSTGRES_DB=postgres
POSTGRES_USER=supabase_admin
# IMPORTANT: Only use alphanumeric characters (no special chars like @, $, etc.)
POSTGRES_PASSWORD=your-super-secret-postgres-password-min-32-chars

# =============================================================================
# JWT CONFIGURATION
# =============================================================================
# IMPORTANT: Must be at least 32 characters
JWT_SECRET=your-super-secret-jwt-token-with-at-least-32-characters
JWT_EXPIRY=3600

# Generate these with: https://supabase.com/docs/guides/self-hosting/docker#generate-api-keys
# Or use the scripts/generate-keys.sh script
ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
SERVICE_ROLE_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...

# =============================================================================
# DASHBOARD AUTHENTICATION
# =============================================================================
DASHBOARD_USERNAME=admin
DASHBOARD_PASSWORD=your-super-secret-dashboard-password
# Generate with: htpasswd -nb admin password | sed 's/\$/\$\$/g'
DASHBOARD_PASSWORD_HASH=$$apr1$$...

# =============================================================================
# GOTRUE (AUTH) CONFIGURATION
# =============================================================================
# Disable signup if you want invite-only
DISABLE_SIGNUP=false
MAILER_AUTOCONFIRM=false

# SMTP for email authentication (optional but recommended)
SMTP_ADMIN_EMAIL=admin@haex.space
SMTP_HOST=smtp.example.com
SMTP_PORT=587
SMTP_USER=your-smtp-user
SMTP_PASS=your-smtp-password
SMTP_SENDER_NAME=HaexHub Marketplace

# =============================================================================
# ENCRYPTION KEYS
# =============================================================================
# Must be exactly 32 characters
VAULT_ENC_KEY=your-vault-encryption-key-32char

# At least 64 characters
SECRET_KEY_BASE=your-secret-key-base-must-be-at-least-64-characters-long-for-security

# =============================================================================
# STORAGE CONFIGURATION
# =============================================================================
STORAGE_BACKEND=file

# =============================================================================
# REALTIME CONFIGURATION
# =============================================================================
# Secret for Realtime RLS
REALTIME_SECRET_KEY_BASE=your-realtime-secret-key-base-must-be-at-least-64-characters

# Tenant name for multi-tenant routing (URL-compatible, no special chars)
# Used as hostname prefix: ${REALTIME_TENANT_NAME}.marketplace-supabase-realtime
REALTIME_TENANT_NAME=marketplace

# =============================================================================
# TRAEFIK NETWORK
# =============================================================================
TRAEFIK_NETWORK=proxy
TRAEFIK_ENDPOINT_HTTP_NAME=web
TRAEFIK_ENDPOINT_HTTPS_NAME=web_secure
TRAEFIK_LETS_ENCRYPT_RESOLVER=http_resolver

# =============================================================================
# IMAGE VERSIONS (optional - defaults to latest stable)
# =============================================================================
# POSTGRES_IMAGE=supabase/postgres:15.8.1.085
# STUDIO_IMAGE=supabase/studio:2025.12.17-sha-43f4f7f
# GOTRUE_IMAGE=supabase/gotrue:v2.184.0
# REALTIME_IMAGE=supabase/realtime:v2.68.0
# STORAGE_IMAGE=supabase/storage-api:v1.33.0
# POSTGREST_IMAGE=postgrest/postgrest:v14.1
# KONG_IMAGE=kong:2.8.1
# META_IMAGE=supabase/postgres-meta:v0.95.1
